<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HikStatus Pro</title>
    <!-- Fonts -->
    <link href="[https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400&family=Vazirmatn:wght@400;700&display=swap](https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400&family=Vazirmatn:wght@400;700&display=swap)" rel="stylesheet">
    <link href="[https://fonts.googleapis.com/icon?family=Material+Icons+Round](https://fonts.googleapis.com/icon?family=Material+Icons+Round)" rel="stylesheet">
    <!-- Chart.js -->
    <script src="[https://cdn.jsdelivr.net/npm/chart.js](https://cdn.jsdelivr.net/npm/chart.js)"></script>
    <!-- Styles -->
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

    <!-- Desktop Sidebar -->
    <nav class="sidebar">
        <div class="logo">
            <span class="material-icons-round status-icon">security_eye</span>
            HikStatus
            <span class="version">v2.5</span>
        </div>
        <div class="nav-links">
            <button class="nav-item active" data-target="dash">
                <span class="material-icons-round">dashboard</span> Dashboard
            </button>
            <button class="nav-item" data-target="logs">
                <span class="material-icons-round">receipt_long</span> Logs
            </button>
            <button class="nav-item" data-target="reports">
                <span class="material-icons-round">bar_chart</span> Reports
            </button>
            <button class="nav-item" data-target="settings">
                <span class="material-icons-round">tune</span> Settings
            </button>
        </div>
        <div class="status-summary" id="sidebar-stats">
            <!-- Stats injected here -->
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="content">
        
        <!-- DASHBOARD VIEW -->
        <section id="dash" class="view active">
            <div class="view-header">
                <div class="view-title">
                    <h2>Overview</h2>
                    <div class="mobile-stats" id="mobile-stats"></div>
                </div>
                <button class="btn btn-icon" id="btn-sync"><span class="material-icons-round">sync</span></button>
            </div>
            <div class="grid-container" id="nvr-container">
                <!-- NVRs and Cameras -->
            </div>
        </section>

        <!-- LOGS VIEW -->
        <section id="logs" class="view">
            <div class="split-layout">
                <aside class="split-sidebar">
                    <div class="control-group">
                        <label>Search</label>
                        <input type="text" id="logSearch" placeholder="Type to search..." class="input">
                    </div>
                    <div class="control-group">
                        <label>Filter</label>
                        <div class="filter-chips">
                            <button class="chip active" data-filter="">All</button>
                            <button class="chip" data-filter="Camera">Cam</button>
                            <button class="chip" data-filter="Telegram">Tele</button>
                            <button class="chip" data-filter="Mail">Mail</button>
                            <button class="chip" data-filter="Service">Sys</button>
                        </div>
                    </div>
                </aside>
                <div class="split-content" id="logScroll">
                    <table class="data-table">
                        <thead><tr><th>Time</th><th>Type</th><th>State</th><th>Details</th></tr></thead>
                        <tbody id="log-list"></tbody>
                    </table>
                    <div class="loader" id="logLoader">Loading...</div>
                </div>
            </div>
        </section>

        <!-- REPORTS VIEW -->
        <section id="reports" class="view">
            <div class="split-layout">
                <aside class="split-sidebar">
                    <div class="control-group">
                        <label>Quick Range</label>
                        <div class="btn-group">
                            <button class="btn btn-outline" onclick="setPreset(1)">1h</button>
                            <button class="btn btn-outline" onclick="setPreset(8)">8h</button>
                            <button class="btn btn-outline" onclick="setPreset(24)">24h</button>
                        </div>
                    </div>
                    <div class="control-group">
                        <label>Custom</label>
                        <input type="datetime-local" id="startDt" class="input">
                        <input type="datetime-local" id="endDt" class="input">
                    </div>
                    <button class="btn btn-primary" onclick="genReport()">Generate Report</button>
                </aside>
                <div class="split-content">
                    <div class="empty-state" id="rep-empty">Select a range to analyze downtime</div>
                    <div class="report-list" id="rep-list"></div>
                </div>
            </div>
        </section>

        <!-- SETTINGS VIEW -->
        <section id="settings" class="view">
            <div class="split-layout">
                <aside class="split-sidebar settings-nav">
                    <!-- Config Groups Injected Here -->
                    <div id="config-nav"></div>
                </aside>
                <div class="split-content">
                    
                    <!-- NVR Config -->
                    <div class="card">
                        <div class="card-header">
                            <h3>NVR Management</h3>
                            <button class="btn btn-sm btn-primary" onclick="addNVR()">Add New</button>
                        </div>
                        <div class="nvr-inputs">
                            <input id="nvrIp" class="input" placeholder="192.168.1.X">
                            <input id="nvrUser" class="input" placeholder="User">
                            <input id="nvrPass" class="input" type="password" placeholder="Pass">
                        </div>
                        <div class="list-group" id="nvr-list"></div>
                    </div>

                    <!-- CSV Config -->
                    <div class="card">
                        <div class="card-header"><h3>Camera CSV</h3></div>
                        <textarea id="csvEditor" class="input code-editor" spellcheck="false"></textarea>
                    </div>

                    <!-- Settings Dynamic -->
                    <div id="config-forms"></div>

                </div>
            </div>
            
            <!-- FABs -->
            <div class="fab-stack">
                <button class="fab fab-reload" onclick="apply()" title="Apply & Restart"><span class="material-icons-round">restart_alt</span></button>
                <button class="fab fab-save" onclick="saveAll()" title="Save"><span class="material-icons-round">save</span></button>
            </div>
        </section>

    </main>

    <!-- Mobile Bottom Nav -->
    <nav class="bottom-nav">
        <button class="nav-item active" data-target="dash"><span class="material-icons-round">dashboard</span>Dash</button>
        <button class="nav-item" data-target="logs"><span class="material-icons-round">receipt_long</span>Logs</button>
        <button class="nav-item" data-target="reports"><span class="material-icons-round">bar_chart</span>Reports</button>
        <button class="nav-item" data-target="settings"><span class="material-icons-round">tune</span>Config</button>
    </nav>

    <!-- Modal -->
    <div class="modal-backdrop" id="modalBackdrop">
        <div class="modal">
            <div class="modal-header">
                <h3 id="m-name">Camera Name</h3>
                <button class="btn-icon" onclick="closeModal()"><span class="material-icons-round">close</span></button>
            </div>
            <div class="modal-body">
                <div class="info-row"><span class="label">Address</span><span class="val mono" id="m-det"></span></div>
                <div class="info-row"><span class="label">Status</span><span class="val" id="m-status"></span></div>
                <div class="info-row"><span class="label">Last Online</span><span class="val mono" id="m-last"></span></div>
                <hr>
                <div class="stat-grid">
                    <div class="stat-box"><span class="num error" id="m-d1">-</span><span class="lbl">1h Down</span></div>
                    <div class="stat-box"><span class="num error" id="m-d24">-</span><span class="lbl">24h Down</span></div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="imp-selector">
                    <label>Importance</label>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-outline" id="btn-imp-1" onclick="setImp(1)">Low</button>
                        <button class="btn btn-sm btn-outline" id="btn-imp-2" onclick="setImp(2)">Normal</button>
                        <button class="btn btn-sm btn-outline" id="btn-imp-3" onclick="setImp(3)">Crit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast">Action Saved</div>

    <!-- Logic -->
    <script src="/static/app.js"></script>
</body>
</html>